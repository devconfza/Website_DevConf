(()=>{"use strict";"undefined"==typeof fetch&&alert("Oh no ðŸ˜¢ We don't support your web browser. Please upgrade to a newer version!");const e=document.getElementById("agenda");if(e){const t=e.getAttribute("data-event-id");t&&function(e,t){let s,n;const a=e=>document.getElementById(e).cloneNode(!0).content,i=e=>s.speakers.filter((t=>e.indexOf(t.id)>=0)),r=e=>{const t=i(e).map((e=>e.fullName));return 1===t.length?t[0]:t.filter(((e,s)=>s<t.length-1)).join(", ")+" & "+t[t.length-1]},o=e=>{const t=i(e).map((e=>e.profilePicture));return 1===t.length?[]:t.slice(1)},c=e=>i(e)[0],l=()=>{document.querySelector("div.popupBackdrop").classList.add("popupBackdropHidden"),document.removeEventListener("keydown",d)},d=e=>{"Escape"===e.key&&l()},u=(e,t,s)=>{e.querySelector(t).innerHTML=s},p=()=>{document.querySelector("div.popupClose").onclick=e=>{l()};const e=document.querySelector("div.popupBackdropHidden");e.addEventListener("click",l),document.querySelectorAll(".agenda-session").forEach((t=>{const s=t,l=t.attributes["data-slot-id"].value;l&&"0"!==l?(s.classList.add("clickable-session"),s.onclick=t=>{const l=s.attributes["data-slot-id"].value,p=m(l);e.classList.remove("popupBackdropHidden"),document.addEventListener("keydown",d);const g=document.querySelector("div.popupContent");g.querySelectorAll("div.popupBio").forEach((e=>{g.removeChild(e)}));const b=c(p.speakers),k=(e=>{const t=[];return e.links.forEach((e=>{const s=document.createElement("a");s.target="_blank",s.href=e.url;const n=document.createElement("img");switch(n.alt=e.title,e.title){case"Twitter":n.src="/public/images/icons8-twitter-50.png";break;case"LinkedIn":n.src="/public/images/icons8-linkedin-50.png";break;case"Blog":n.src="/public/images/icons8-website-50.png";break;default:n.src="/public/images/icons8-external-link-50.png"}s.appendChild(n),t.push(s)})),t})(b),f=a("popupBioContent").firstElementChild,h=f.querySelector("img.largePopupImage");h.src=b.profilePicture;const y=o(p.speakers);y.length>0&&h.setAttribute("x-altImage",y[0]),u(f,"div.bio-speaker",r(p.speakers));const v=f.querySelector("div.bio-social");k.forEach((e=>{v.appendChild(e)}));const E=(e=>{const t=i(e).map((e=>e.bio));return 1===t.length?t[0]:t.join(" <br/> ")})(p.speakers);u(f,"div.bio-tagline",b.tagLine),u(f,"div.bio-title",p.title),u(f,"div.bio-talk-description",p.description),u(f,"div.bio-speaker-bio",E),u(f,"div.bio-track",`Track: ${(e=>{const t=e.categoryItems.filter((e=>n.map((e=>e.id)).indexOf(e)>-1))[0];return t?n.filter((e=>e.id===t))[0].name:""})(p)}`),g.insertAdjacentElement("beforeend",f)}):s.classList.add("unclickable-session")}))},m=e=>s.sessions.filter((t=>t.id===e))[0],g=e=>{s=e,n=e.categories.filter((e=>"Track"===e.title))[0].items,document.querySelectorAll(".agenda-session").forEach(((e,t)=>{const s=e,n=s.attributes["data-slot-id"].value,i="true"===s.attributes["data-remote"].value,l=m(n);if(l)a("sessionCardTemplate").querySelectorAll("div").forEach((e=>{switch(e.className){case"agenda-session-image":{const s=document.createElement("img");s.src=(t=l.speakers,c(t).profilePicture);const n=o(l.speakers);n.length>0&&s.setAttribute("x-altImage",n[0]),s.classList.add("speaker-image"),e.appendChild(s);break}case"agenda-session-name":e.innerText=r(l.speakers);break;case"agenda-session-title":e.innerText=l.title;break;case"agenda-session-remote":i&&(e.style.display="block")}var t;s.insertAdjacentElement("beforeend",e)}));else{const e=a("tbaCardTemplate").querySelector("div");s.insertAdjacentElement("beforeend",e)}})),p(),document.querySelectorAll(".agenda-row-style-loading").forEach((e=>{e.style.display="none"})),document.querySelectorAll(".agenda > .hidden-row").forEach((e=>{e.style.display="grid"}))},b=()=>{const t=window.sessionStorage.getItem(`event${e}`);if(t){const e=JSON.parse(t);g(e)}else alert("Oh no! Something has gone horribly wrong. Please reload your browser and try again.")};navigator.onLine?fetch(`https://sessionize.com/api/v2/${e}/view/all`).then((t=>{switch(t.status){case 200:t.json().then((e=>e)).then((t=>{window.sessionStorage.setItem(`event${e}`,JSON.stringify(t)),g(t)}));break;case 304:b()}})):b(),setInterval((()=>{Array.from(document.getElementsByTagName("img")).filter((e=>null!==e.getAttribute("x-altImage"))).forEach((e=>{const t=e.src;e.src=e.getAttribute("x-altImage"),e.setAttribute("x-altImage",t)}))}),2500)}(t)}})();