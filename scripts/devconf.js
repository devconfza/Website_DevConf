(()=>{"use strict";const e="https://ratings-2slkxdorza-nw.a.run.app",t=e=>document.getElementById(e)?.cloneNode(!0)?.content,n=(e,t,n)=>{e.querySelector(t).innerText=n},o=(e,t,n,o,r,a)=>{const s=()=>{document.querySelector("div.popupBackdrop").classList.add("popupBackdropHidden"),document.removeEventListener("keydown",i);const e=document.querySelector('div[data-popup-content="yes"]');e?.parentNode?.removeChild(e),r?.call(void 0)},i=e=>{"Escape"===e.key&&s()};document.querySelector("div.popupClose").onclick=()=>{s()};const c=document.querySelector("div.popupBackdropHidden");c.addEventListener("click",s),e.forEach((e=>{const r=t(e);r?(n&&e.classList.add(n),e.onclick=()=>{c.classList.remove("popupBackdropHidden"),document.addEventListener("keydown",i);const e=document.querySelector("div.popupContent");e.querySelectorAll("div.popupBio").forEach((t=>{e.removeChild(t)})),r.setAttribute("data-popup-content","yes"),e.insertAdjacentElement("beforeend",r),a?.call(void 0,e)}):o&&e.classList.add(o)}))},r=async e=>{let t;const n=(e=>{const t=window.sessionStorage.getItem(`event${e}`);if(t)try{return JSON.parse(t)}catch{return void alert("Oh no! Something has gone horribly wrong. Please close and reopen your browser and try again.")}})(e);if(n)return n;if(navigator.onLine)try{const n=await fetch(`https://sessionize.com/api/v2/${e}/view/all`);n.ok&&(t=await n.json(),window.sessionStorage.setItem(`event${e}`,JSON.stringify(t)))}catch{alert("Oh no! Something has gone horribly wrong. Please reload your browser and try again.")}return t},a={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let s;const i=new Uint8Array(16);function c(){if(!s&&(s="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(i)}const l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));const d=function(e,t,n){if(a.randomUUID&&!t&&!e)return a.randomUUID();const o=(e=e||{}).random||(e.rng||c)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=o[e];return t}return function(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}(o)};"undefined"==typeof fetch&&alert("Oh no ðŸ˜¢ We don't support your web browser. Please upgrade to a newer version!"),(async()=>{const e=document.getElementById("agenda");if(!e)return;const a=e.getAttribute("data-event-id");if(!a)return;let s;const i=e=>s.speakers.filter((t=>e.indexOf(t.id)>=0)),c=e=>{const t=i(e).map((e=>e.fullName));return 1===t.length?t[0]:`${t.filter(((e,n)=>n<t.length-1)).join(", ")} & ${t[t.length-1]}`},l=e=>{const t=i(e).map((e=>e.profilePicture));return 1===t.length?[]:t.slice(1)},d=e=>i(e)[0],u=e=>d(e).profilePicture,p=e=>s.sessions.filter((t=>t.id===e))[0],m=(e,t=!1)=>{const n=document.createElement("img");return n.src=e,n.classList.add("speaker-image"),t&&n.classList.add("hide"),n},g=(e,t,n=!1)=>{const o=document.createElement("div");o.setAttribute("x-imageset",""),o.classList.add("multi-speaker-container");const r=m(e);return r.classList.add("multi-speaker-image"),n&&r.classList.add("largePopupImage"),o.appendChild(r),t.forEach((e=>{const t=m(e,!0);t.classList.add("multi-speaker-image"),n&&t.classList.add("largePopupImage"),o.appendChild(t)})),o};s=await r(a),s&&(document.querySelectorAll(".agenda-session").forEach((e=>{const n=e,o=n.attributes["data-slot-id"].value,r=p(o);if(r)t("sessionCardTemplate").querySelectorAll("div").forEach((e=>{switch(e.className){case"agenda-session-image":{const t=l(r.speakers);if(t.length>0){const n=g(u(r.speakers),t);e.appendChild(n)}else e.appendChild(m(u(r.speakers)));break}case"agenda-session-name":e.innerText=c(r.speakers);break;case"agenda-session-title":e.innerText=r.title}n.insertAdjacentElement("beforeend",e)}));else{const e=t("tbaCardTemplate").querySelector("div");n.insertAdjacentElement("beforeend",e)}})),o(document.querySelectorAll(".agenda-session"),(e=>{const o=e.attributes["data-slot-id"].value;if(!o&&"0"===o)return null;const r=e.attributes["data-slot-id"].value,a=p(r),s=d(a.speakers),u=i(a.speakers).flatMap((e=>(e=>{const t=[];return e.links.forEach((e=>{const n=document.createElement("a");n.target="_blank",n.href=e.url;const o=document.createElement("img");switch(o.alt=e.title,e.title){case"Twitter":o.src="/public/images/icons8-twitter-50.png";break;case"LinkedIn":o.src="/public/images/icons8-linkedin-50.png";break;case"Blog":o.src="/public/images/icons8-website-50.png";break;default:o.src="/public/images/icons8-external-link-50.png"}n.appendChild(o),t.push(n)})),t})(e))),m=t("popupBioContent").firstElementChild,f=l(a.speakers);if(f.length>0){const e=m.querySelector("img.largePopupImage");e.classList.add("hide");const t=g(s.profilePicture,f,!0);e.insertAdjacentElement("afterend",t)}else m.querySelector("img.largePopupImage").src=s.profilePicture;n(m,"div.bio-speaker",c(a.speakers));const y=m.querySelector("div.bio-social");u.forEach((e=>{y.appendChild(e)}));const h=(e=>{const t=i(e).map((e=>e.bio));return 1===t.length?t[0]:t.join(" <hr/> ")})(a.speakers);return 0===f.length&&n(m,"div.bio-tagline",s.tagLine),n(m,"div.bio-title",a.title),n(m,"div.bio-talk-description",a.description),n(m,"div.bio-speaker-bio",h),m}),"clickable-session","unclickable-session"),document.querySelectorAll(".agenda-row-style-loading").forEach((e=>{e.style.display="none"})),document.querySelectorAll(".agenda > .hidden-row").forEach((e=>{e.style.display="grid"})),setInterval((()=>{Array.from(document.querySelectorAll("div[x-imageSet]")).forEach((e=>{const t=e.querySelectorAll("img"),n=Array.from(t).findIndex((e=>!e.classList.contains("hide")));(e=>{let t=1;const n=()=>{t<=.1?e.classList.add("hide"):(e.style.opacity=t.toString(),t-=.025*t,requestAnimationFrame(n))};n()})(t[n]);let o=n+1;o>=t.length&&(o=0),(e=>{let t=.1;e.classList.remove("hide");const n=()=>{t>=1||(e.style.opacity=t.toString(),t+=.025*t,requestAnimationFrame(n))};n()})(t[o])}))}),3500))})(),(async()=>{const a=document.getElementById("feedbackStage");if(!a)return;let s;const i=window.sessionStorage.getItem("questionStructure");if(i)s=JSON.parse(i);else{const e=await fetch("/public/ratingconfig.json");if(!e.ok)return;s=await e.json(),window.sessionStorage.setItem("questionStructure",JSON.stringify(s))}const c=a.getAttribute("data-rating-id");if(!c)return;const l=a.getAttribute("data-event-id");if(!l)return;const u=document.getElementById("sessionData").innerText.trim().split(" "),p=await r(l),m=document.getElementById("workshopData").innerText.trim().split(";;;").map((e=>e.trim())),g=window.localStorage.getItem(`rating${c}`);let f;f=g?JSON.parse(g):{event:c,submitter:d()};const y=e=>{const t=p.sessions.find((t=>t.id===e)),n=t.speakers.map((e=>p.speakers.find((t=>t.id===e)).fullName)).join(" and ");return`${t.title} by ${n}`},h=(e,t,n)=>{f[`s${e}`]||(f[`s${e}`]={}),f[`s${e}`][t]=n,window.localStorage.setItem(`rating${c}`,JSON.stringify(f))},b=["no","none"],k=e=>{const t=f[`s${e}`]||{};return Object.keys(t).filter((n=>{const o=s.structure[e].questions.find((e=>e.id===n));if(!o)return!1;const r=t[n];if("timeslot-selector"===o.type&&"none"===r)return!1;const a=o.needs;if(!a)return!0;const i=t[a];return!i||!b.find((e=>e===i))})).length};a.removeChild(document.getElementById("feedbackLoading")),s.structure.forEach(((e,o)=>{let r,s=!1;if(void 0!==e.workshop){const t=m[e.workshop];"none"!==t&&(s=!0,r=t)}else e.subtitle&&(r=e.subtitle),s=!0;if(s){const s=t("feedbackButton").querySelector("div");s.setAttribute("data-id",o.toString()),n(s,".feedbackButtonTitle",e.title),n(s,".feedbackButtonProgressBar",`Questions Completed ${k(o)} / ${e.questions.length}`),r&&n(s,".feedbackButtonWorkshop",r),a.insertAdjacentElement("beforeend",s)}})),o(document.querySelectorAll(".feedbackButton"),(e=>{const o=+e.attributes["data-id"].value,r=t("feedbackPopup").firstElementChild,a=s.structure[o];n(r,"div.feedbackTitle",`Feedback for ${a.title}`),a.questions.forEach((e=>{const a=t("questionTemplate").firstElementChild;n(a,"div.questionTitle",e.label);const s=t(`${e.type}QuestionStyleTemplate`).firstElementChild;switch(e.type){case"email":((e,t,n)=>{const o=f[`s${n}`]?.[t.id];o&&(e.value=o),e.onchange=()=>{const{value:o}=e;o&&h(n,t.id,o)}})(s,e,o);break;case"level":case"role":case"influence":((e,t,n)=>{const o=f[`s${n}`]?.[t.id];o&&e.querySelectorAll("option").forEach((e=>{e.value===o&&(e.selected=!0)})),e.onchange=()=>{h(n,t.id,e.value)}})(s,e,o);break;case"text":((e,t,n)=>{const o=f[`s${n}`]?.[t.id];o&&(e.value=o),e.onchange=()=>{const{value:o}=e;o&&h(n,t.id,o)}})(s,e,o);break;case"rate":((e,t,n)=>{const o=e.querySelector('input[type="range"]'),r=f[`s${n}`]?.[t.id];r&&(o.value=r),o.oninput=()=>{console.log("update");const e=o.value;e&&h(n,t.id,e)}})(s,e,o);break;case"yesno":((e,t,n)=>{const o=f[`s${n}`]?.[t.id];o&&(e.querySelector(`input[name="yesno"][value="${o}"]`).checked=!0),e.onchange=()=>{const o=e.querySelector('input[name="yesno"]:checked')?.value;o&&h(n,t.id,o)}})(s,e,o);break;case"years":((e,t,n)=>{const o=f[`s${n}`]?.[t.id];o&&(e.value=o),e.onchange=()=>{const{value:o}=e;if(o){let e;try{e=+o}catch{}e&&e>=0&&e<=60&&h(n,t.id,o)}}})(s,e,o);break;case"timeslot-selector":((e,t,n)=>{const o=5*t.key+1,r=o+5;for(let t=o;t<r;t++){const n=u[t],o=document.createElement("option");o.value=n,o.text=y(n),e.append(o)}const a=f[`s${n}`]?.[t.id];a&&e.querySelectorAll("option").forEach((e=>{e.value===a&&(e.selected=!0)})),e.onchange=()=>{h(n,t.id,e.value)}})(s,e,o)}s.attributes["data-rating-field-id"]=e.id,a.insertAdjacentElement("beforeend",s),r.insertAdjacentElement("beforeend",a)}));const i=t("doneButton").firstElementChild;return i.onclick=()=>{document.querySelector("div.popupClose").dispatchEvent(new Event("click"))},r.insertAdjacentElement("beforeend",i),r}),void 0,void 0,(()=>{document.querySelectorAll("div.feedbackButton").forEach((e=>{const t=+e.attributes["data-id"].value;n(e,".feedbackButtonProgressBar",`Questions Completed ${k(t)} / ${s.structure[t].questions.length}`)}))}),(e=>{e.querySelectorAll('input[type="range"]').forEach((e=>{e.dispatchEvent(new Event("input"))}))})),(()=>{const t=document.getElementById("saveDataButton");t.onclick=n=>{t.innerText="Saving...",t.disabled=!0,n.preventDefault(),grecaptcha.ready((async()=>{const n=await grecaptcha.execute("6LfkPcUlAAAAAHwYs14fkTiEZYsu5hAAq_bLKp-j",{action:"submit"});f.captcha=n,(await fetch(e,{method:"POST",body:JSON.stringify(f)})).ok?(t.disabled=!1,t.innerText="Save Complete",setTimeout((()=>{t.innerText="Save"}),2e3)):(t.innerText="Save",t.disabled=!1,alert("Oh no! Something has gone horribly wrong. Please reload your browser and try again."))}))},t.style.display="unset"})()})(),(()=>{const e=document.getElementsByClassName("sponsor-content-detail-wide-body")[0];if(!e)return;let t=0;setInterval((()=>{t+=.25,t>e.scrollWidth&&(t=0),e.scrollTo(t,0)}),10)})(),(()=>{const n=document.getElementById("speakerFeedbackReport");if(!n)return;const o=document.getElementById("speakerKey");(()=>{const r=document.getElementById("getDataButton");r&&(r.onclick=async()=>{r.disabled=!0,r.innerText="Loading...";const a=o.value,s=await fetch(`${e}?speaker=${a}`);s.ok&&((e=>{n.innerHTML="",e.forEach((e=>{const o=t("title").firstElementChild;o.innerText=e.event,n.insertAdjacentElement("beforeend",o);const r=t("feedbackTable").firstElementChild,a=e.feedback.reduce(((e,t)=>(e.presSum+=t.ratingPresentation,e.contentSum+=t.ratingContent,e.valueSum+=t.ratingValue,e)),{presSum:0,contentSum:0,valueSum:0});r.querySelector("#presAvg").innerText=(a.presSum/e.feedback.length).toFixed(2),r.querySelector("#contentAvg").innerText=(a.contentSum/e.feedback.length).toFixed(2),r.querySelector("#valueAvg").innerText=(a.valueSum/e.feedback.length).toFixed(2);const s=r.querySelector("#feedbackFooter");e.feedback.forEach((e=>{const n=t("feedbackRow").firstElementChild;n.querySelector(".presValue").innerText=e.ratingValue.toString(),n.querySelector(".contentValue").innerText=e.ratingContent.toString(),n.querySelector(".valueValue").innerText=e.ratingValue.toString(),n.querySelector(".feedbackValue").innerText=e.feedback||"",s.insertAdjacentElement("beforebegin",n)})),n.insertAdjacentElement("beforeend",r)}))})(await s.json()),window.localStorage.setItem("speakerFeedbackKey",a)),r.disabled=!1,r.innerText="Get Report"})})(),(()=>{const e=window.localStorage.getItem("speakerFeedbackKey");e&&(o.value=e)})()})()})();