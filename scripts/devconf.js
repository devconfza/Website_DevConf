(()=>{"use strict";const e="https://ratings-2slkxdorza-nw.a.run.app",t=e=>document.getElementById(e)?.cloneNode(!0)?.content,n=(e,t,n)=>{e.querySelector(t).innerText=n},r=(e,t,n,r,o,a)=>{const i=()=>{window.currentSpeaker=void 0,document.querySelector("div.popupBackdrop").classList.add("popupBackdropHidden"),document.removeEventListener("keydown",s);const e=document.querySelector('div[data-popup-content="yes"]');e?.parentNode?.removeChild(e),o?.call(void 0)},s=e=>{"Escape"===e.key&&i()};document.querySelector("div.popupShare").onclick=async()=>{if(window.currentSpeaker){const e={title:`DevConf Speaker: ${window.currentSpeaker.name}`,text:`DevConf Speaker: ${window.currentSpeaker.name}`,url:`${window.location.origin+window.location.pathname}?currentSpeaker=${window.currentSpeaker.id}`};await navigator.share(e)}},document.querySelector("div.popupClose").onclick=()=>{i()};const c=document.querySelector("div.popupBackdropHidden");c.addEventListener("click",i),e.forEach((e=>{const o=t(e);o?(n&&e.classList.add(n),e.onclick=()=>{c.classList.remove("popupBackdropHidden"),document.addEventListener("keydown",s);const t=document.querySelector("div.popupContent"),n=e.attributes["data-slot-id"].value;n&&t.setAttribute("speaker-id",n),t.querySelectorAll("div.popupBio").forEach((e=>{t.removeChild(e)})),o.setAttribute("data-popup-content","yes"),t.insertAdjacentElement("beforeend",o),a?.call(void 0,t)}):r&&e.classList.add(r)}))},o=async e=>{let t;const n=(e=>{const t=window.sessionStorage.getItem(`event${e}`);if(t)try{return JSON.parse(t)}catch{return void alert("Oh no! Something has gone horribly wrong. Please close and reopen your browser and try again.")}})(e);if(n)return n;if(navigator.onLine)try{const n=await fetch(`https://sessionize.com/api/v2/${e}/view/all`);n.ok&&(t=await n.json(),window.sessionStorage.setItem(`event${e}`,JSON.stringify(t)))}catch{alert("Oh no! Something has gone horribly wrong. Please reload your browser and try again.")}return t},a={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let i;const s=new Uint8Array(16);function c(){if(!i&&(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(s)}const l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));const d=function(e,t,n){if(a.randomUUID&&!t&&!e)return a.randomUUID();const r=(e=e||{}).random||(e.rng||c)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return function(e,t=0){return l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]}(r)};"undefined"==typeof fetch&&alert("Oh no ðŸ˜¢ We don't support your web browser. Please upgrade to a newer version!"),(async()=>{const e=document.getElementById("agenda");if(!e)return;const a=e.getAttribute("data-event-id");if(!a)return;let i;const s=e=>i.speakers.filter((t=>e.indexOf(t.id)>=0)),c=["ðŸ”¹"],l=e=>{const t=s(e);if(1===t.length){const e=t[0];let n="";n=e.categoryItems.indexOf(204593)>=0?"South Africa":e.questionAnswers.find((e=>59078===e.questionId))?.answerValue;let r="";e.categoryItems.indexOf(204689)>=0&&(r="He/Him"),e.categoryItems.indexOf(204687)>=0&&(r="She/Her"),e.categoryItems.indexOf(204688)>=0&&(r="They/Them");const o=c[Math.floor(Math.random()*c.length)];return r?`${r} ${o} ${n}`:n}return""},d=e=>{const t=s(e).map((e=>e.fullName));return 1===t.length?t[0]:`${t.filter(((e,n)=>n<t.length-1)).join(", ")} & ${t[t.length-1]}`},u=e=>{const t=s(e).map((e=>e.profilePicture));return 1===t.length?[]:t.slice(1)},p=e=>s(e)[0],m=e=>p(e).profilePicture,g=e=>i.sessions.filter((t=>t.id===e))[0],f=(e,t=!1)=>{const n=document.createElement("img");return n.src=e,n.classList.add("speaker-image"),t&&n.classList.add("hide"),n},y=(e,t,n=!1)=>{const r=document.createElement("div");r.setAttribute("x-imageset",""),r.classList.add("multi-speaker-container");const o=f(e);return o.classList.add("multi-speaker-image"),n&&o.classList.add("largePopupImage"),r.appendChild(o),t.forEach((e=>{const t=f(e,!0);t.classList.add("multi-speaker-image"),n&&t.classList.add("largePopupImage"),r.appendChild(t)})),r};if(i=await o(a),!i)return;document.querySelectorAll(".agenda-session").forEach((e=>{const n=e,r=n.attributes["data-slot-id"].value;if("999999"===r){const e=t("noSessionCardTemplate").querySelector("div");n.insertAdjacentElement("beforeend",e)}else{const e=g(r);if(e)t("sessionCardTemplate").querySelectorAll("div").forEach((t=>{switch(t.className){case"agenda-session-image":{const n=u(e.speakers);if(n.length>0){const r=y(m(e.speakers),n);t.appendChild(r)}else t.appendChild(f(m(e.speakers)));break}case"agenda-session-subtitle":t.innerText=l(e.speakers);break;case"agenda-session-name":t.innerText=d(e.speakers);break;case"agenda-session-title":t.innerText=e.title}n.insertAdjacentElement("beforeend",t)}));else{const e=t("tbaCardTemplate").querySelector("div");n.insertAdjacentElement("beforeend",e)}}})),r(document.querySelectorAll(".agenda-session"),(e=>{const r=e.attributes["data-slot-id"].value;if(!r&&"0"===r)return null;const o=g(r);if(o){const e=p(o.speakers),r=s(o.speakers).flatMap((e=>(e=>{const t=[];return e.links.forEach((e=>{const n=document.createElement("a");n.target="_blank",n.href=e.url;const r=document.createElement("img");switch(r.alt=e.title,e.title){case"Twitter":r.src="/public/images/icons8-twitter-50.png";break;case"LinkedIn":r.src="/public/images/icons8-linkedin-50.png";break;case"Blog":r.src="/public/images/icons8-website-50.png";break;default:r.src="/public/images/icons8-external-link-50.png"}n.appendChild(r),t.push(n)})),t})(e))),a=t("popupBioContent").firstElementChild,i=u(o.speakers);if(i.length>0){const t=a.querySelector("img.largePopupImage");t.classList.add("hide");const n=y(e.profilePicture,i,!0);t.insertAdjacentElement("afterend",n)}else a.querySelector("img.largePopupImage").src=e.profilePicture;n(a,"div.bio-speaker",d(o.speakers)),n(a,"div.bio-subtitle",l(o.speakers));const c=a.querySelector("div.bio-social");r.forEach((e=>{c.appendChild(e)}));const m=(e=>{const t=s(e).map((e=>e.bio));return 1===t.length?t[0]:t.join(" <hr/> ")})(o.speakers);return 0===i.length&&n(a,"div.bio-tagline",e.tagLine),n(a,"div.bio-title",o.title),n(a,"div.bio-talk-description",o.description),n(a,"div.bio-speaker-bio",m),a}return null}),"clickable-session","unclickable-session",void 0,(e=>{const t=e.attributes["speaker-id"].value;if(t){const e=g(t);if(e){const n=p(e.speakers);window.currentSpeaker={name:n.fullName,id:t}}}})),document.querySelectorAll(".agenda-row-style-loading").forEach((e=>{e.style.display="none"})),document.querySelectorAll(".agenda > .hidden-row").forEach((e=>{e.style.display="grid"})),setInterval((()=>{Array.from(document.querySelectorAll("div[x-imageSet]")).forEach((e=>{const t=e.querySelectorAll("img"),n=Array.from(t).findIndex((e=>!e.classList.contains("hide")));(e=>{let t=1;const n=()=>{t<=.1?e.classList.add("hide"):(e.style.opacity=t.toString(),t-=.025*t,requestAnimationFrame(n))};n()})(t[n]);let r=n+1;r>=t.length&&(r=0),(e=>{let t=.1;e.classList.remove("hide");const n=()=>{t>=1||(e.style.opacity=t.toString(),t+=.025*t,requestAnimationFrame(n))};n()})(t[r])}))}),3500);const h=new URLSearchParams(window.location.search).get("currentSpeaker");h&&document.querySelector(`div[data-slot-id="${h}"]`).click()})(),(async()=>{const a=document.getElementById("feedbackStage");if(!a)return;let i;const s=window.sessionStorage.getItem("questionStructure");if(s)i=JSON.parse(s);else{const e=await fetch("/public/ratingconfig.json");if(!e.ok)return;i=await e.json(),window.sessionStorage.setItem("questionStructure",JSON.stringify(i))}const c=a.getAttribute("data-rating-id");if(!c)return;const l=a.getAttribute("data-event-id");if(!l)return;const u=document.getElementById("sessionData").innerText.trim().split(" "),p=await o(l),m=document.getElementById("workshopData").innerText.trim().split(";;;").map((e=>e.trim())),g=window.localStorage.getItem(`rating${c}`);let f;f=g?JSON.parse(g):{event:c,submitter:d()};const y=e=>{const t=p.sessions.find((t=>t.id===e));if(!t)return"To Be Announced";const n=t.speakers.map((e=>p.speakers.find((t=>t?.id===e)))).filter((e=>!!e)).map((e=>e?.fullName)).join(" and ");return`${t.title} by ${n}`},h=(e,t,n)=>{f[`s${e}`]||(f[`s${e}`]={}),f[`s${e}`][t]=n,window.localStorage.setItem(`rating${c}`,JSON.stringify(f))},v=["no","none"],b=e=>{const t=f[`s${e}`]||{};return Object.keys(t).filter((n=>{const r=i.structure[e].questions.find((e=>e.id===n));if(!r)return!1;const o=t[n];if("timeslot-selector"===r.type&&"none"===o)return!1;const a=r.needs;if(!a)return!0;const s=t[a];return!s||!v.find((e=>e===s))})).length};a.removeChild(document.getElementById("feedbackLoading")),i.structure.forEach(((e,r)=>{let o,i=!1;if(void 0!==e.workshop){const t=m[e.workshop];"none"!==t&&(i=!0,o=t)}else e.subtitle&&(o=e.subtitle),i=!0;if(i){const i=t("feedbackButton").querySelector("div");i.setAttribute("data-id",r.toString()),n(i,".feedbackButtonTitle",e.title),n(i,".feedbackButtonProgressBar",`Questions Completed ${b(r)} / ${e.questions.length}`),o&&n(i,".feedbackButtonWorkshop",o),a.insertAdjacentElement("beforeend",i)}})),r(document.querySelectorAll(".feedbackButton"),(e=>{const r=+e.attributes["data-id"].value,o=t("feedbackPopup").firstElementChild,a=i.structure[r];n(o,"div.feedbackTitle",`Feedback for ${a.title}`),a.questions.forEach((e=>{const a=t("questionTemplate").firstElementChild;n(a,"div.questionTitle",e.label);const i=t(`${e.type}QuestionStyleTemplate`).firstElementChild;switch(e.type){case"email":((e,t,n)=>{const r=f[`s${n}`]?.[t.id];r&&(e.value=r),e.onchange=()=>{const{value:r}=e;r&&h(n,t.id,r)}})(i,e,r);break;case"level":case"role":case"influence":((e,t,n)=>{const r=f[`s${n}`]?.[t.id];r&&e.querySelectorAll("option").forEach((e=>{e.value===r&&(e.selected=!0)})),e.onchange=()=>{h(n,t.id,e.value)}})(i,e,r);break;case"text":((e,t,n)=>{const r=f[`s${n}`]?.[t.id];r&&(e.value=r),e.onchange=()=>{const{value:r}=e;r&&h(n,t.id,r)}})(i,e,r);break;case"rate":((e,t,n)=>{const r=e.querySelector('input[type="range"]'),o=f[`s${n}`]?.[t.id];o&&(r.value=o),r.oninput=()=>{console.log("update");const e=r.value;e&&h(n,t.id,e)}})(i,e,r);break;case"yesno":((e,t,n)=>{const r=f[`s${n}`]?.[t.id];r&&(e.querySelector(`input[name="yesno"][value="${r}"]`).checked=!0),e.onchange=()=>{const r=e.querySelector('input[name="yesno"]:checked')?.value;r&&h(n,t.id,r)}})(i,e,r);break;case"years":((e,t,n)=>{const r=f[`s${n}`]?.[t.id];r&&(e.value=r),e.onchange=()=>{const{value:r}=e;if(r){let e;try{e=+r}catch{}e&&e>=0&&e<=60&&h(n,t.id,r)}}})(i,e,r);break;case"timeslot-selector":((e,t,n)=>{const r=5*t.key+1,o=r+5;for(let t=r;t<o;t++){const n=u[t];if("999999"===n)continue;const r=document.createElement("option");r.value=n,r.text=y(n),e.append(r)}const a=f[`s${n}`]?.[t.id];a&&e.querySelectorAll("option").forEach((e=>{e.value===a&&(e.selected=!0)})),e.onchange=()=>{h(n,t.id,e.value)}})(i,e,r)}i.attributes["data-rating-field-id"]=e.id,a.insertAdjacentElement("beforeend",i),o.insertAdjacentElement("beforeend",a)}));const s=t("doneButton").firstElementChild;return s.onclick=()=>{document.querySelector("div.popupClose").dispatchEvent(new Event("click"))},o.insertAdjacentElement("beforeend",s),o}),void 0,void 0,(()=>{document.querySelectorAll("div.feedbackButton").forEach((e=>{const t=+e.attributes["data-id"].value;n(e,".feedbackButtonProgressBar",`Questions Completed ${b(t)} / ${i.structure[t].questions.length}`)}))}),(e=>{e.querySelectorAll('input[type="range"]').forEach((e=>{e.dispatchEvent(new Event("input"))}))})),(()=>{const t=document.getElementById("saveDataButton");t.onclick=n=>{t.innerText="Saving...",t.disabled=!0,n.preventDefault(),grecaptcha.ready((async()=>{const n=await grecaptcha.execute("6LfkPcUlAAAAAHwYs14fkTiEZYsu5hAAq_bLKp-j",{action:"submit"});f.captcha=n,(await fetch(e,{method:"POST",body:JSON.stringify(f)})).ok?(t.disabled=!1,t.innerText="Save Complete",setTimeout((()=>{t.innerText="Save"}),2e3)):(t.innerText="Save",t.disabled=!1,alert("Oh no! Something has gone horribly wrong. Please reload your browser and try again."))}))},t.style.display="unset"})()})(),(()=>{const e=document.getElementsByClassName("sponsor-content-detail-wide-body")[0];if(!e)return;let t=0;setInterval((()=>{t+=.25,t>e.scrollWidth&&(t=0),e.scrollTo(t,0)}),10)})(),(()=>{const n=document.getElementById("speakerFeedbackReport");if(!n)return;const r=document.getElementById("speakerKey"),o=(e,t)=>{const n=t||0;if(0===n)return n.toFixed(2);let r="";return e>n&&(r="â†‘"),e<n&&(r="â†“"),`${n.toFixed(2)} ${r}`};(()=>{const a=document.getElementById("getDataButton");a&&(a.onclick=async()=>{a.disabled=!0,a.innerText="Loading...";const i=r.value,s=await fetch(`${e}?speaker=${i}`);if(s.ok){const e=await s.json(),r=e.filter((e=>!e.event));((e,r)=>{n.innerHTML="",e.forEach((e=>{const a=t("title").firstElementChild;a.innerText=e.event,n.insertAdjacentElement("beforeend",a);const i=t("feedbackTable").firstElementChild,s=e.feedback.reduce(((e,t)=>(e.presSum+=t.ratingPresentation,e.contentSum+=t.ratingContent,e.valueSum+=t.ratingValue,e)),{presSum:0,contentSum:0,valueSum:0}),c=s.presSum/e.feedback.length,l=s.contentSum/e.feedback.length,d=s.valueSum/e.feedback.length;if(i.querySelector("#presAvg").innerText=c.toFixed(2),i.querySelector("#contentAvg").innerText=l.toFixed(2),i.querySelector("#valueAvg").innerText=d.toFixed(2),r.length>0){const t=r[0];i.querySelector("#timeslotPresAvg").innerText=o(c,t[`${e.event}-ratingPresentationtimeslot`]),i.querySelector("#timeslotContentAvg").innerText=o(l,t[`${e.event}-ratingContenttimeslot`]),i.querySelector("#timeslotValueAvg").innerText=o(d,t[`${e.event}-ratingValuetimeslot`]),i.querySelector("#eventPresAvg").innerText=o(c,t[`${e.event}-ratingPresentation`]),i.querySelector("#eventContentAvg").innerText=o(l,t[`${e.event}-ratingContent`]),i.querySelector("#eventValueAvg").innerText=o(d,t[`${e.event}-ratingValue`]),i.querySelector("#globalPresAvg").innerText=o(c,t["global-ratingPresentation"]),i.querySelector("#globalContentAvg").innerText=o(l,t["global-ratingContent"]),i.querySelector("#globalValueAvg").innerText=o(d,t["global-ratingValue"])}else i.querySelectorAll(".additionalAverageInfo").forEach((e=>{console.log("sdd"),e.style.display="none"}));const u=i.querySelector("#feedbackFooter");e.feedback.forEach((e=>{const n=t("feedbackRow").firstElementChild;n.querySelector(".presValue").innerText=e.ratingPresentation.toFixed(0),n.querySelector(".contentValue").innerText=e.ratingContent.toFixed(0),n.querySelector(".valueValue").innerText=e.ratingValue.toFixed(0),n.querySelector(".feedbackValue").innerText=e.feedback||"",u.insertAdjacentElement("beforebegin",n)})),n.insertAdjacentElement("beforeend",i)}))})(e.filter((e=>e.event)),r),window.localStorage.setItem("speakerFeedbackKey",i)}a.disabled=!1,a.innerText="Get Report"})})(),(()=>{const e=window.localStorage.getItem("speakerFeedbackKey");e&&(r.value=e)})()})()})();
//# sourceMappingURL=devconf.js.map