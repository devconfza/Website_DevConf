<script type='text/javascript' src='https://code.jquery.com/jquery-2.1.4.min.js'></script>
<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js'></script>
<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js'></script>
<script type='text/javascript' src='/public/scripts/scrolling-nav.js'></script>
<script type='text/javascript' src='/public/scripts/bootstrap.min.js'></script>
<!--<script type='text/javascript' src='/public/scripts/jquery.min.js'></script>-->
<!--<script type='text/javascript' src="/public/scripts/scrolling-nav.js"></script>-->

<script type="text/javascript">
    var updateCountdown = function()
        {
            var now = moment(new Date());
            var confDays = moment(new Date(2016, 2, 8, 9, 0,0));
            var days = confDays.diff(now, 'days');
            var hours = confDays.diff(now.add(days, 'd'), 'hours');
            var mins = confDays.diff(now.add(hours, 'h'), 'minutes');
            var secs = confDays.diff(now.add(mins, 'm'), 'seconds');

            $('#countdown-days').html(days);
            $('#countdown-hours').html(hours);
            $('#countdown-mins').html(mins);
            $('#countdown-secs').html(secs);
        };

    $(function()
    {
        updateCountdown();
        $('#countdown-timer').show();
        setInterval(updateCountdown, 1000);
    });
</script>

<script type="text/javascript">          
    $.ajax('http://helperservices.tjkruger.com/devconf/ticketssoldcount', {
        dataType: 'json',
        success: function(data) {
            console.log('Resp', data);
            var remaining = 0;
            if (data.total === undefined) {
                remaining = 246 - data;             
            } else {
                remaining = 246 - data.total;
                    // + data.Complimentary_Ticket
                remaining += data['DevUG_Organiser'] || 0;
                remaining += data['DevConf_Speaker'] || 0;
                remaining += data['BBD_Sponsor_Ticket'] || 0;
                remaining += data['DevConf_-_Media'] || 0;
                remaining += data['Allan_Gray_Sponsor'] || 0;
                remaining += data['Mint_Management_Technologies_Sponsor'] || 0;
                remaining += data['Chillisoft_Sponsor'] || 0;
                remaining += data['EOH_Sponsor'] || 0;
                remaining += data['Microsoft_Sponsor'] || 0;
                remaining += data['Entelect_Sponsor'] || 0;
                remaining += data['Google_Sponsor'] || 0;
                remaining += data['Derivco_Sponsor'] || 0;
            }

            if (remaining <= 0){
                remaining = "Sold Out!";
            }   
            
            $('#ticketsremainingcount').html(remaining);
            $('#ticketsremaining').show();
        }
    });
</script>

